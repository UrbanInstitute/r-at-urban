"0","# variables of interest"
"0","vars <- c("
"0","  ""B19013_001E"",  # median household income estimate"
"0","  ""B19013_001M""   # median household income margin of error"
"0",")"
"0",""
"0","# states of interest: alabama, alaska, arizona"
"0","state_fips <- c(""01"", ""02"", ""04"")"
"0","	"
"0","# create a custom function that works for one state"
"0","get_income <- function(state_fips) {"
"0","	"
"0","	income_data <- getCensus(name = ""acs/acs5"", "
"0","													 key = Sys.getenv(""CENSUS_KEY""),"
"0","													 vars = vars, "
"0","													 region = ""tract:*"","
"0","													 regionin = paste0(""state:"", state_fips),"
"0","													 vintage = 2015)"
"0","	"
"0","	return(income_data)"
"0","	"
"0","}"
"0",""
"0","# iterate the function"
"0","map_df(.x = state_fips, # iterate along the vector of state fips codes"
"0","			 .f = get_income) %>% # apply get_income() to each fips_code  "
"0","	as_tibble() "
