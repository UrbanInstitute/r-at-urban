library(tidyverse)
# variables of interest
vars <- c(
"B19013_001E",  # median household income estimate
"B19013_001M"   # median household income margin of error
)
# states of interest: alabama, alaska, arizona
state_fips <- c("01", "02", "04")
# create a custom function that works for one state
get_income <- function(state_fips) {
income_data <- getCensus(name = "acs/acs5",
vars = vars,
region = "tract:*",
regionin = paste0("state:", state_fips),
vintage = 2015)
return(income_data)
}
# iterate the function
map_df(.x = state_fips, # iterate along the vector of state fips codes
.f = get_income) %>% # apply get_income() to each fips_code
as_tibble()
?getCensus
library(censusapi)
library(tidyverse)
library(purrr)
library(censusapi)
vars <- c(
"B19013_001E",  # median household income estimate
"B19013_001M"   # median household income margin of error
)
getCensus(name = "acs/acs5",
vars = vars,
region = "tract:*",
regionin = "state:01",
vintage = 2015) %>%
as_tibble()
# source(here::here("getting-data", "census_api_key.R"))
Sys.getenv("CENSUS_API_KEY")
library(censusapi)
?getCensus
library(tidyverse)
library(purrr)
library(censusapi)
vars <- c(
"B19013_001E",  # median household income estimate
"B19013_001M"   # median household income margin of error
)
getCensus(name = "acs/acs5",
key = Sys.getenv("CENSUS_KEY"),
vars = vars,
region = "tract:*",
regionin = "state:01",
vintage = 2015) %>%
as_tibble()
Sys.getenv()
Sys.getenv("CENSUS KEY")
Sys.getenv("CENSUS_KEY")
readRenviron("~/.Renviron")
Sys.getenv("CENSUS_KEY")
Sys.getenv("CENSUS_KEY")
#you will need a census api key, apply here: https://api.census.gov/data/key_signup.html
census_api_key(
"b76598caee3135caf0d02f35006b220f6f962278",
install = TRUE,
overwrite = TRUE
)
library(tidycensus)
#you will need a census api key, apply here: https://api.census.gov/data/key_signup.html
census_api_key(
"b76598caee3135caf0d02f35006b220f6f962278",
install = TRUE,
overwrite = TRUE
)
#you will need a census api key, apply here: https://api.census.gov/data/key_signup.html
census_api_key(
"b76598caee3135caf0d02f35006b220f6f962278",
install = TRUE,
overwrite = TRUE
)
readRenviron("~/.Renviron")
Sys.getenv("CENSUS_API_KEY")
Sys.getenv("CENSUS_KEY")
Sys.getenv()
Sys.getenv("CENSUS_API_KEY")
library(tidyverse)
library(tidycensus)
?getcensus
library(censusapi)
?getCensus
# variables of interest
vars <- c(
"B19013_001E",  # median household income estimate
"B19013_001M"   # median household income margin of error
)
# states of interest: alabama, alaska, arizona
state_fips <- c("01", "02", "04")
# create a custom function that works for one state
get_income <- function(state_fips) {
income_data <- getCensus(name = "acs/acs5",
key = Sys.getenv("CENSUS_KEY"),
vars = vars,
region = "tract:*",
regionin = paste0("state:", state_fips),
vintage = 2015)
return(income_data)
}
# iterate the function
map_df(.x = state_fips, # iterate along the vector of state fips codes
.f = get_income) %>% # apply get_income() to each fips_code
as_tibble()
library(tidyverse)
library(purrr)
library(censusapi)
vars <- c(
"B19013_001E",  # median household income estimate
"B19013_001M"   # median household income margin of error
)
getCensus(name = "acs/acs5",
key = Sys.getenv("CENSUS_KEY"),
vars = vars,
region = "tract:*",
regionin = "state:01",
vintage = 2015) %>%
as_tibble()
library(tidyverse)
library(purrr)
library(censusapi)
vars <- c(
"B19013_001E",  # median household income estimate
"B19013_001M"   # median household income margin of error
)
getCensus(name = "acs/acs5",
key = Sys.getenv("CENSUS_API_KEY"),
vars = vars,
region = "tract:*",
regionin = "state:01",
vintage = 2015) %>%
as_tibble()
