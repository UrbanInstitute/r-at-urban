<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>tables.utf8</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.20/datatables.js"></script>
<link href="site_libs/dt-core-bootstrap-1.11.3/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-bootstrap-1.11.3/css/dataTables.bootstrap.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-bootstrap-1.11.3/js/jquery.dataTables.min.js"></script>
<script src="site_libs/dt-core-bootstrap-1.11.3/js/dataTables.bootstrap.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114294141-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-114294141-1');
</script>
			

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R@URBAN</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">HOME</a>
</li>
<li>
  <a href="intro-to-r.html">INTRO TO R</a>
</li>
<li>
  <a href="graphics-guide.html">DATA VIZ</a>
</li>
<li>
  <a href="mapping.html">MAPPING</a>
</li>
<li>
  <a href="getting-data.html">GETTING DATA</a>
</li>
<li>
  <a href="optimization.html">OPTIMIZATION</a>
</li>
<li>
  <a href="resources.html">RESOURCES</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<p><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato" /></p>
<div id="header">
<p><img src="tables/images/urban-institute-logo.png" /></p>
</div>
<div id="section" class="section level2">
<h2></h2>
</div>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
<p>There are two important steps to building a useful table in R:</p>
<ol style="list-style-type: decimal">
<li>Get the data frame into the correct shape.</li>
<li>Decide on the output format.</li>
</ol>
<p>The section “Tidy Data” addresses the first step by outlining <code>library(broom)</code> and <code>library(dplyr)</code>. Both are powerful tools with uses well beyond making tables.</p>
<p>The rest of this document is dedicated to outlining the strengths, weaknesses, uses, and methods of different tools for building tables in R. The following subsections link output formats to tools:</p>
<div id="r-markdown" class="section level3">
<h3>R Markdown</h3>
<p>todo(aaron): add image</p>
<p>R Markdown is one of the most powerful parts of R. It combines “text chunks”, “code chunks”, and “output chunks” to create <a href="http://rmarkdown.rstudio.com/gallery.html">a range of documents</a> including .PDF, .html, Microsoft Word, websites, books, and more (this guide was built using R Markdown!). It is best for creating <em>entire</em> documents instead of pieces of larger documents.</p>
<p>Most of the tools in this document are optimized for creating tables using R Markdown. This is fortunate if R Markdown is the tool of choice for a publication and unfortunate if R is just one piece of a heterogeneous workflow.</p>
</div>
<div id="html" class="section level3">
<h3>html</h3>
<p>This guide is an html document. Any table in this document can be easily replicated as-is in .html. <code>kable()</code>, <code>library(kableExtra)</code>, <code>library(formattable)</code>, and <code>library(stargazer)</code> are the best tools for .html documents.</p>
<p>Here’s an example .html table:</p>
<pre class="r"><code>library(formattable)
library(kableExtra)
library(tidyverse)
library(knitr)

diamonds %&gt;%
  top_n(5, price) %&gt;%
  arrange(desc(price)) %&gt;%
  select(Carat = carat, Cut = cut, Price = price) %&gt;%
  mutate(Price = currency(Price, digits = 0)) %&gt;%
  kable(caption = &quot;Top Diamond Prices&quot;, align = &quot;rlrr&quot;, format = &quot;html&quot;) %&gt;%
  kable_styling(full_width = FALSE, position = &quot;left&quot;) %&gt;%
  add_footnote(&quot;Urban Institute analysis of diamond data&quot;, notation = &quot;alphabet&quot;)</code></pre>
<table class="table" style="width: auto !important; ">
<caption>
Top Diamond Prices
</caption>
<thead>
<tr>
<th style="text-align:right;">
Carat
</th>
<th style="text-align:left;">
Cut
</th>
<th style="text-align:right;">
Price
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2.29
</td>
<td style="text-align:left;">
Premium
</td>
<td style="text-align:right;">
$18,823
</td>
</tr>
<tr>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:left;">
Very Good
</td>
<td style="text-align:right;">
$18,818
</td>
</tr>
<tr>
<td style="text-align:right;">
1.51
</td>
<td style="text-align:left;">
Ideal
</td>
<td style="text-align:right;">
$18,806
</td>
</tr>
<tr>
<td style="text-align:right;">
2.07
</td>
<td style="text-align:left;">
Ideal
</td>
<td style="text-align:right;">
$18,804
</td>
</tr>
<tr>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:left;">
Very Good
</td>
<td style="text-align:right;">
$18,803
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>a</sup> Urban Institute analysis of diamond data
</td>
</tr>
</tfoot>
</table>
</div>
<div id="pdf" class="section level3">
<h3>PDF</h3>
<p>R Markdown is great for “knitting” straight to PDF. Many of the tables in this document can be “knitted” to PDF with little to no change to the code but the output will look a little different than .html. <code>kable()</code>, <code>library(kableExtra)</code>, <code>library(formattable)</code>, and <code>library(stargazer)</code> are the best tools for PDFs.</p>
<p>Here’s a great example of a PDF table by Bhargavi Ganesh (HFPC):</p>
<p><img src="tables/images/ganesh.png" /></p>
<p>todo(aaron): update Bhargavi example</p>
</div>
<div id="latex" class="section level3">
<h3>LaTeX</h3>
<p>LaTeX (pronounced “lay-tech”) is a syntax/micro-language for typesetting technical and scientific documents. <code>kable()</code>, <code>library(kableExtra)</code>, and <code>library(stargazer)</code> can all write to LaTeX which can then be implemented elsewhere.</p>
<p>Here’s an example of raw LaTeX output by <code>kable()</code>:</p>
<p><img src="tables/images/latex.png" width="500px" /></p>
</div>
<div id="text" class="section level3">
<h3>Text</h3>
<p><code>library(stargazer)</code> is the only real option for printing ASCII tables.</p>
<p><img src="tables/images/ascii.png" width="500px" /></p>
</div>
<div id="microsoft-word" class="section level3">
<h3>Microsoft Word</h3>
<p>The appealing but dense formatting of the Urban Institute’s Microsoft Word template makes it effectively impossible right now to “knit” or write straight to Microsoft Word for publications. R Markdown and <code>library(WordR)</code> can both “knit” or write straight to Microsoft Word documents.</p>
</div>
<div id="microsoft-excel" class="section level3">
<h3>Microsoft Excel</h3>
<p>R tools for interacting with Microsoft Excel have never been more powerful. <code>library(readr)</code>, <code>library(writexl)</code>, and <code>library(openxlsx)</code> can write to .csv, .xls, .xlsx without formats, and .xlsx with formats. All three tools are outlined under “Export to Excel”.</p>
<p>If Excel is necessary, programmatically write the data to one sheet in a workbook and then use cell references to build Urban Institute-compliant tables in another sheet. This way, the data can be updated without deleting the tables or formatting.</p>
<p><img src="tables/images/borough.png" /></p>
<p><em>An early table in “A Discours of the Variation of the Cumpas, or Magneticall Needle” by William Borough (1581)</em></p>
</div>
</div>
<div id="kable" class="section level2">
<h2>kable()</h2>
<p>The <code>kable()</code> function from <code>library(knitr)</code> is the simplest way to build tables in R Markdown.</p>
<p><code>kable()</code>’s tables are ugly in the R console, but their default is appealing in R Markdown. Add <code>css: styles.css</code> to the R Markdown YAML header before using <code>kable()</code> so styles and fonts are Urban Institute compliant.</p>
<pre class="r"><code>---
output: 
  html_document:
    css: styles.css
---</code></pre>
<pre class="r"><code>library(tidyverse)
library(knitr)

mtcars_subset &lt;- mtcars %&gt;%
    rownames_to_column(var = &quot;Model&quot;) %&gt;%
    select(Model, MPG = mpg, Cylinders = cyl, Weight = wt) %&gt;%
    arrange(-MPG) %&gt;%
    top_n(5, MPG)

mtcars_subset %&gt;%
    kable(caption = &quot;Cars with the best fuel economy&quot;)</code></pre>
<table>
<caption>
Cars with the best fuel economy
</caption>
<thead>
<tr>
<th style="text-align:left;">
Model
</th>
<th style="text-align:right;">
MPG
</th>
<th style="text-align:right;">
Cylinders
</th>
<th style="text-align:right;">
Weight
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Toyota Corolla
</td>
<td style="text-align:right;">
33.9
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.835
</td>
</tr>
<tr>
<td style="text-align:left;">
Fiat 128
</td>
<td style="text-align:right;">
32.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2.200
</td>
</tr>
<tr>
<td style="text-align:left;">
Honda Civic
</td>
<td style="text-align:right;">
30.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.615
</td>
</tr>
<tr>
<td style="text-align:left;">
Lotus Europa
</td>
<td style="text-align:right;">
30.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.513
</td>
</tr>
<tr>
<td style="text-align:left;">
Fiat X1-9
</td>
<td style="text-align:right;">
27.3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.935
</td>
</tr>
</tbody>
</table>
<div id="caption" class="section level3">
<h3>caption</h3>
<p><code>caption =</code> adds a title to the R Markdown table.</p>
<p>Titles can also be added with <code>##</code>, <code>###</code>, <code>####</code>, etc. in R Markdown documents. This is advantageous because the table title will be added to the table of contents based on where it falls in the hierarchy of html/R Markdown headers. R Markdown table titles default to the same size as headers with ####.</p>
<p><code>#### Cars with the best fuel economy</code></p>
<div id="cars-with-the-best-fuel-economy" class="section level4">
<h4>Cars with the best fuel economy</h4>
</div>
</div>
<div id="digits" class="section level3">
<h3>digits</h3>
<p><code>digits =</code> controls the maximum number of digits for each number in a table.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)

mtcars_subset %&gt;%
    kable(digits = 0)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
Model
</th>
<th style="text-align:right;">
MPG
</th>
<th style="text-align:right;">
Cylinders
</th>
<th style="text-align:right;">
Weight
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Toyota Corolla
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Fiat 128
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Honda Civic
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Lotus Europa
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Fiat X1-9
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div id="col.names" class="section level3">
<h3>col.names</h3>
<p>The first <code>kable()</code> example in the <code>library(kable)</code> subsection renamed variables with <code>select()</code> before making the table. This is often necessary because lower case names with underscores are more common in analyses than Urban Institute-compliant column names (sentence case).</p>
<p>Another option is to specify a vector of column names when using <code>kable()</code>. <code>col.names =</code> specifies a vector with which to replace column names.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)

mtcars_subset %&gt;%
    kable(col.names = c(&quot;Car model&quot;, &quot;Fuel Economy&quot;, &quot;Cylinders&quot;, &quot;Weight (Tons)&quot;))</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
Car model
</th>
<th style="text-align:right;">
Fuel Economy
</th>
<th style="text-align:right;">
Cylinders
</th>
<th style="text-align:right;">
Weight (Tons)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Toyota Corolla
</td>
<td style="text-align:right;">
33.9
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.835
</td>
</tr>
<tr>
<td style="text-align:left;">
Fiat 128
</td>
<td style="text-align:right;">
32.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2.200
</td>
</tr>
<tr>
<td style="text-align:left;">
Honda Civic
</td>
<td style="text-align:right;">
30.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.615
</td>
</tr>
<tr>
<td style="text-align:left;">
Lotus Europa
</td>
<td style="text-align:right;">
30.4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.513
</td>
</tr>
<tr>
<td style="text-align:left;">
Fiat X1-9
</td>
<td style="text-align:right;">
27.3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1.935
</td>
</tr>
</tbody>
</table>
</div>
<div id="align" class="section level3">
<h3>align</h3>
<p><code>align =</code> changes the column alignment. Numeric columns are right-aligned by default and all other columns are left-aligned by default. The arguments for <code>align =</code> differ by output type.</p>
<p>Alignment options for PDF are <code>"left"</code>, <code>"center"</code>, and <code>"right"</code> and the options for .html are <code>"l"</code>, <code>"c"</code>, and <code>"r"</code>. Individual columns can be formatted by concatenating options into one vector (ex. <code>align = c("right", "left", "right", "center"</code>) for PDF and one character string (ex. <code>align = "rlrc"</code>) for .html.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)

mtcars_subset %&gt;%
    select(MPG, Cylinders, Weight, Model) %&gt;%
    kable(align = &quot;rlrr&quot;)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:right;">
MPG
</th>
<th style="text-align:left;">
Cylinders
</th>
<th style="text-align:right;">
Weight
</th>
<th style="text-align:right;">
Model
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
33.9
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
1.835
</td>
<td style="text-align:right;">
Toyota Corolla
</td>
</tr>
<tr>
<td style="text-align:right;">
32.4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
2.200
</td>
<td style="text-align:right;">
Fiat 128
</td>
</tr>
<tr>
<td style="text-align:right;">
30.4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
1.615
</td>
<td style="text-align:right;">
Honda Civic
</td>
</tr>
<tr>
<td style="text-align:right;">
30.4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
1.513
</td>
<td style="text-align:right;">
Lotus Europa
</td>
</tr>
<tr>
<td style="text-align:right;">
27.3
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
1.935
</td>
<td style="text-align:right;">
Fiat X1-9
</td>
</tr>
</tbody>
</table>
</div>
<div id="additional-arguments" class="section level3">
<h3>additional arguments</h3>
<ul>
<li><code>trim = FALSE</code></li>
<li><code>nsmall = 0L</code></li>
<li><code>justify = c("left", "right", "centre", "none")</code></li>
<li><code>width = NULL</code></li>
<li><code>na.encode = TRUE</code></li>
<li><code>scientific = NA</code></li>
<li><code>big.mark   = ""</code><br />
</li>
<li><code>big.interval = 3L</code></li>
<li><code>small.mark = ""</code></li>
<li><code>small.interval = 5L</code></li>
<li><code>decimal.mark = getOption("OutDec")</code></li>
<li><code>zero.print = NULL</code></li>
<li><code>drop0trailing = FALSE, ...)</code></li>
</ul>
</div>
</div>
<div id="librarykableextra" class="section level2">
<h2>library(kableExtra)</h2>
<p><code>library(kableExtra)</code> extends the power and customization of <code>library(kable)</code>.</p>
<p><a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">This article</a> outlines many of the following capabilities.</p>
<div id="full_width" class="section level3">
<h3>full_width</h3>
<p>“kables” stretch to the full width of a document by default. <code>full_width = FALSE</code> turns off this default.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

kable(x = head(mtcars), format = &quot;html&quot;) %&gt;%
  kable_styling(full_width = FALSE)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:right;">
disp
</th>
<th style="text-align:right;">
hp
</th>
<th style="text-align:right;">
drat
</th>
<th style="text-align:right;">
wt
</th>
<th style="text-align:right;">
qsec
</th>
<th style="text-align:right;">
vs
</th>
<th style="text-align:right;">
am
</th>
<th style="text-align:right;">
gear
</th>
<th style="text-align:right;">
carb
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mazda RX4
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.620
</td>
<td style="text-align:right;">
16.46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Mazda RX4 Wag
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.875
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Datsun 710
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
3.85
</td>
<td style="text-align:right;">
2.320
</td>
<td style="text-align:right;">
18.61
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet 4 Drive
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
258
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.08
</td>
<td style="text-align:right;">
3.215
</td>
<td style="text-align:right;">
19.44
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet Sportabout
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
360
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
3.15
</td>
<td style="text-align:right;">
3.440
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Valiant
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
225
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
2.76
</td>
<td style="text-align:right;">
3.460
</td>
<td style="text-align:right;">
20.22
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="position" class="section level3">
<h3>position</h3>
<p>Using <code>full_width = F</code> opens up the possibility of changing the alignment of the table on the page.</p>
<p>For example, <code>position = "left"</code></p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

kable(x = head(mtcars), format = &quot;html&quot;, caption = &quot;mtcars with position = &#39;left&#39;&quot;) %&gt;%
  kable_styling(full_width = FALSE, position = &quot;left&quot;)</code></pre>
<table class="table" style="width: auto !important; ">
<caption>
mtcars with position = ‘left’
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:right;">
disp
</th>
<th style="text-align:right;">
hp
</th>
<th style="text-align:right;">
drat
</th>
<th style="text-align:right;">
wt
</th>
<th style="text-align:right;">
qsec
</th>
<th style="text-align:right;">
vs
</th>
<th style="text-align:right;">
am
</th>
<th style="text-align:right;">
gear
</th>
<th style="text-align:right;">
carb
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mazda RX4
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.620
</td>
<td style="text-align:right;">
16.46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Mazda RX4 Wag
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.875
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Datsun 710
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
3.85
</td>
<td style="text-align:right;">
2.320
</td>
<td style="text-align:right;">
18.61
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet 4 Drive
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
258
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.08
</td>
<td style="text-align:right;">
3.215
</td>
<td style="text-align:right;">
19.44
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet Sportabout
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
360
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
3.15
</td>
<td style="text-align:right;">
3.440
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Valiant
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
225
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
2.76
</td>
<td style="text-align:right;">
3.460
</td>
<td style="text-align:right;">
20.22
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
<div id="mtcars-with-float_right" class="section level4">
<h4>mtcars with float_right</h4>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

kable(x = head(mtcars), format = &quot;html&quot;) %&gt;%
  kable_styling(full_width = FALSE, position = &quot;float_right&quot;)</code></pre>
<table class="table" style="width: auto !important; float: right; margin-left: 10px;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:right;">
disp
</th>
<th style="text-align:right;">
hp
</th>
<th style="text-align:right;">
drat
</th>
<th style="text-align:right;">
wt
</th>
<th style="text-align:right;">
qsec
</th>
<th style="text-align:right;">
vs
</th>
<th style="text-align:right;">
am
</th>
<th style="text-align:right;">
gear
</th>
<th style="text-align:right;">
carb
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mazda RX4
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.620
</td>
<td style="text-align:right;">
16.46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Mazda RX4 Wag
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.875
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Datsun 710
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
3.85
</td>
<td style="text-align:right;">
2.320
</td>
<td style="text-align:right;">
18.61
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet 4 Drive
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
258
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.08
</td>
<td style="text-align:right;">
3.215
</td>
<td style="text-align:right;">
19.44
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet Sportabout
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
360
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
3.15
</td>
<td style="text-align:right;">
3.440
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Valiant
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
225
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
2.76
</td>
<td style="text-align:right;">
3.460
</td>
<td style="text-align:right;">
20.22
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
<p>Body text can be set to the side of a table using <code>float_right</code> or <code>float_left</code>. The text that appears next to the table goes after the function call in R Markdown documents.</p>
</div>
</div>
<div id="column_spec" class="section level3">
<h3>column_spec</h3>
<p>Individual columns can be formatted with <code>column_spec()</code>. The arguments are <code>width</code>, <code>bold</code>, <code>italic</code>, <code>monospace</code>, <code>color</code> (text color), <code>background</code> (column color), <code>border_left</code>, and <code>border_right</code>. If the paragraph next to a table with <code>position = "float_right"</code> is too short, the head and text of the subsequent section will appear next to the table.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

kable(x = head(mtcars), format = &quot;html&quot;, caption = &quot;Highlight an important column&quot;) %&gt;%
  kable_styling(full_width = FALSE) %&gt;%
    column_spec(3, background = &quot;#1696d2&quot;)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Highlight an important column
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:right;">
disp
</th>
<th style="text-align:right;">
hp
</th>
<th style="text-align:right;">
drat
</th>
<th style="text-align:right;">
wt
</th>
<th style="text-align:right;">
qsec
</th>
<th style="text-align:right;">
vs
</th>
<th style="text-align:right;">
am
</th>
<th style="text-align:right;">
gear
</th>
<th style="text-align:right;">
carb
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mazda RX4
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;background-color: #1696d2 !important;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.620
</td>
<td style="text-align:right;">
16.46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Mazda RX4 Wag
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;background-color: #1696d2 !important;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.875
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Datsun 710
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;background-color: #1696d2 !important;">
4
</td>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
3.85
</td>
<td style="text-align:right;">
2.320
</td>
<td style="text-align:right;">
18.61
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet 4 Drive
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;background-color: #1696d2 !important;">
6
</td>
<td style="text-align:right;">
258
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.08
</td>
<td style="text-align:right;">
3.215
</td>
<td style="text-align:right;">
19.44
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet Sportabout
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;background-color: #1696d2 !important;">
8
</td>
<td style="text-align:right;">
360
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
3.15
</td>
<td style="text-align:right;">
3.440
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Valiant
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;background-color: #1696d2 !important;">
6
</td>
<td style="text-align:right;">
225
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
2.76
</td>
<td style="text-align:right;">
3.460
</td>
<td style="text-align:right;">
20.22
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="row_spec" class="section level3">
<h3>row_spec</h3>
<p>Individual rows can be formatted with <code>row_spec()</code>. The arguments are <code>bold</code>, <code>italic</code>, <code>monospace</code>, <code>color</code> (text color), and <code>background</code> (row color).</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

kable(x = head(mtcars), format = &quot;html&quot;, caption = &quot;Highlight an important row&quot;) %&gt;%
  kable_styling(full_width = FALSE, position = &quot;left&quot;) %&gt;%
    row_spec(3, color = &quot;#ffffff&quot;, background = &quot;#1696d2&quot;, bold = TRUE)</code></pre>
<table class="table" style="width: auto !important; ">
<caption>
Highlight an important row
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:right;">
disp
</th>
<th style="text-align:right;">
hp
</th>
<th style="text-align:right;">
drat
</th>
<th style="text-align:right;">
wt
</th>
<th style="text-align:right;">
qsec
</th>
<th style="text-align:right;">
vs
</th>
<th style="text-align:right;">
am
</th>
<th style="text-align:right;">
gear
</th>
<th style="text-align:right;">
carb
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mazda RX4
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.620
</td>
<td style="text-align:right;">
16.46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Mazda RX4 Wag
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
2.875
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
Datsun 710
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
22.8
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
4
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
108
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
93
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
3.85
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
2.320
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
18.61
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
1
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
1
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
4
</td>
<td style="text-align:right;font-weight: bold;color: #ffffff !important;background-color: #1696d2 !important;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet 4 Drive
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
258
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
3.08
</td>
<td style="text-align:right;">
3.215
</td>
<td style="text-align:right;">
19.44
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet Sportabout
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
360
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
3.15
</td>
<td style="text-align:right;">
3.440
</td>
<td style="text-align:right;">
17.02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Valiant
</td>
<td style="text-align:right;">
18.1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
225
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
2.76
</td>
<td style="text-align:right;">
3.460
</td>
<td style="text-align:right;">
20.22
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="add_header_above" class="section level3">
<h3>add_header_above</h3>
<p><code>library(kableExtra)</code> can add a second tier of column labels with <code>add_header_above</code>.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

diamonds %&gt;%
    filter(row_number() &lt; 10) %&gt;%
    select(price, carat, cut, color, clarity) %&gt;%
    kable(format = &quot;html&quot;, caption = &quot;Diamond features&quot;) %&gt;%
  kable_styling(full_width = FALSE) %&gt;%
    add_header_above(c(&quot; &quot; = 1, &quot;Shape and size&quot; = 2, &quot;Stone color&quot; = 2))</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Diamond features
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Shape and size
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Stone color
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
price
</th>
<th style="text-align:right;">
carat
</th>
<th style="text-align:left;">
cut
</th>
<th style="text-align:left;">
color
</th>
<th style="text-align:left;">
clarity
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
326
</td>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:left;">
Ideal
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
SI2
</td>
</tr>
<tr>
<td style="text-align:right;">
326
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:left;">
Premium
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
SI1
</td>
</tr>
<tr>
<td style="text-align:right;">
327
</td>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:left;">
Good
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
VS1
</td>
</tr>
<tr>
<td style="text-align:right;">
334
</td>
<td style="text-align:right;">
0.29
</td>
<td style="text-align:left;">
Premium
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:left;">
VS2
</td>
</tr>
<tr>
<td style="text-align:right;">
335
</td>
<td style="text-align:right;">
0.31
</td>
<td style="text-align:left;">
Good
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
SI2
</td>
</tr>
<tr>
<td style="text-align:right;">
336
</td>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:left;">
Very Good
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
VVS2
</td>
</tr>
<tr>
<td style="text-align:right;">
336
</td>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:left;">
Very Good
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:left;">
VVS1
</td>
</tr>
<tr>
<td style="text-align:right;">
337
</td>
<td style="text-align:right;">
0.26
</td>
<td style="text-align:left;">
Very Good
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
SI1
</td>
</tr>
<tr>
<td style="text-align:right;">
337
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:left;">
Fair
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
VS2
</td>
</tr>
</tbody>
</table>
</div>
<div id="group_rows" class="section level3">
<h3>group_rows</h3>
<p>Similarly, <code>group_rows()</code> can be used to add an extra tier of row labels.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

diamonds %&gt;%
    filter(cut %in% c(&quot;Ideal&quot;, &quot;Premium&quot;)) %&gt;%
    filter(row_number() &lt;= 10) %&gt;%
    arrange(cut, desc(price)) %&gt;%
    select(carat, color, price) %&gt;%
    kable(format = &quot;html&quot;, caption = &quot;Diamond prices&quot;) %&gt;%
    kable_styling(full_width = FALSE) %&gt;%
  kableExtra::group_rows(&quot;Premium&quot;, 1, 6) %&gt;%
  kableExtra::group_rows(&quot;Ideal&quot;, 7, 10)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Diamond prices
</caption>
<thead>
<tr>
<th style="text-align:right;">
carat
</th>
<th style="text-align:left;">
color
</th>
<th style="text-align:right;">
price
</th>
</tr>
</thead>
<tbody>
<tr grouplength="6">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Premium</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.30
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
348
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.31
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:right;">
344
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.23
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:right;">
340
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.23
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
326
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.24
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
355
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.20
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
345
</td>
</tr>
<tr grouplength="4">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Ideal</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.32
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
345
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.22
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
342
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.29
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
334
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.21
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
326
</td>
</tr>
</tbody>
</table>
</div>
<div id="add_footnote" class="section level3">
<h3>add_footnote()</h3>
<p>Adding footnotes to tables is simple with <code>add_footnote()</code>. <code>notation =</code> can be set to “number”, “alphabet”, or “symbol”.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)

diamonds %&gt;%
    filter(cut %in% c(&quot;Ideal&quot;, &quot;Premium&quot;)) %&gt;%
    filter(row_number() &lt;= 10) %&gt;%
    arrange(cut, desc(price)) %&gt;%
    select(carat, color, price) %&gt;%
    kable(format = &quot;html&quot;, caption = &quot;Diamond prices&quot;) %&gt;%
    kable_styling(full_width = FALSE) %&gt;%
  group_rows(&quot;Premium&quot;, 1, 6) %&gt;%
  group_rows(&quot;Ideal&quot;, 7, 10) %&gt;%
    add_footnote(c(&quot;All prices are in 2017 dollars&quot;, &quot;Urban Institute analysis of diamond data&quot;), notation = &quot;alphabet&quot;)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Diamond prices
</caption>
<thead>
<tr>
<th style="text-align:right;">
carat
</th>
<th style="text-align:left;">
color
</th>
<th style="text-align:right;">
price
</th>
</tr>
</thead>
<tbody>
<tr grouplength="6">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Premium</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.30
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
348
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.31
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:right;">
344
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.23
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:right;">
340
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.23
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
326
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.24
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
355
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.20
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
345
</td>
</tr>
<tr grouplength="4">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Ideal</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.32
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
345
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.22
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
342
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.29
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
334
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.21
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
326
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>a</sup> All prices are in 2017 dollars
</td>
</tr>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>b</sup> Urban Institute analysis of diamond data
</td>
</tr>
</tfoot>
</table>
<p>Footnotes can also reference titles and column headings.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)  

diamonds %&gt;%
    filter(cut %in% c(&quot;Ideal&quot;, &quot;Premium&quot;)) %&gt;%
    filter(row_number() &lt;= 10) %&gt;%
    arrange(cut, desc(price)) %&gt;%
    select(carat, color, price) %&gt;%
    kable(format = &quot;html&quot;, caption = &quot;Diamond prices[note]&quot;) %&gt;%
    kable_styling(full_width = FALSE) %&gt;%
  group_rows(&quot;Premium [note]&quot;, 1, 6) %&gt;%
  group_rows(&quot;Ideal&quot;, 7, 10) %&gt;%
    add_footnote(c(&quot;Could include blood diamonds&quot;, &quot;All prices are in 2017 dollars&quot;, &quot;Urban Institute analysis of diamond data&quot;), notation = &quot;alphabet&quot;) </code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Diamond prices<sup>a</sup>
</caption>
<thead>
<tr>
<th style="text-align:right;">
carat
</th>
<th style="text-align:left;">
color
</th>
<th style="text-align:right;">
price
</th>
</tr>
</thead>
<tbody>
<tr grouplength="6">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Premium <sup>b</sup></strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.30
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
348
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.31
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:right;">
344
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.23
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:right;">
340
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.23
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
326
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.24
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
355
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.20
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
345
</td>
</tr>
<tr grouplength="4">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Ideal</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.32
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
345
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.22
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
342
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.29
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:right;">
334
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
0.21
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
326
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>a</sup> Could include blood diamonds
</td>
</tr>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>b</sup> All prices are in 2017 dollars
</td>
</tr>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>c</sup> Urban Institute analysis of diamond data
</td>
</tr>
</tfoot>
</table>
</div>
</div>
<div id="libraryformattable" class="section level2">
<h2>library(formattable)</h2>
<p><code>library(formattable)</code> has two distinct applications. The first is formatting vectors that can be used in any table or output in R. The second is building highly-formatted tables that go beyond <code>library(kable)</code> + <code>library(kableExtra)</code>.</p>
<div id="pre-defined-formats" class="section level3">
<h3>Pre-defined Formats</h3>
<p>Percentages are usually stored as decimals in R for ease of computation. But it is often desirable to present those decimals as percentages in tables. The function <code>percent()</code> quickly converts a vector of decimals like <code>0.068</code> into percentages like <code>6.8%</code>. The argument <code>digits =</code> controls the number of decimal places to be shown.</p>
<pre class="r"><code>library(tidyverse)
library(formattable)

unemployment &lt;- tibble(
    State = c(&quot;Alabama&quot;, &quot;Alaska&quot;, &quot;Arizona&quot;, &quot;Arkansas&quot;, &quot;California&quot;),
  `2000` = percent(c(.068, .05, .05, .04, .09), digits = 1),
  `2013` = percent(c(.064, .062, .05, .06, .065), digits = 1),
  Change = percent(c(-.004, .012, 0, .02, -.025), digits = 1)
    )

formattable(unemployment)</code></pre>
<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
State
</th>
<th style="text-align:right;">
2000
</th>
<th style="text-align:right;">
2013
</th>
<th style="text-align:right;">
Change
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
Alabama
</td>
<td style="text-align:right;">
6.8%
</td>
<td style="text-align:right;">
6.4%
</td>
<td style="text-align:right;">
-0.4%
</td>
</tr>
<tr>
<td style="text-align:right;">
Alaska
</td>
<td style="text-align:right;">
5.0%
</td>
<td style="text-align:right;">
6.2%
</td>
<td style="text-align:right;">
1.2%
</td>
</tr>
<tr>
<td style="text-align:right;">
Arizona
</td>
<td style="text-align:right;">
5.0%
</td>
<td style="text-align:right;">
5.0%
</td>
<td style="text-align:right;">
0.0%
</td>
</tr>
<tr>
<td style="text-align:right;">
Arkansas
</td>
<td style="text-align:right;">
4.0%
</td>
<td style="text-align:right;">
6.0%
</td>
<td style="text-align:right;">
2.0%
</td>
</tr>
<tr>
<td style="text-align:right;">
California
</td>
<td style="text-align:right;">
9.0%
</td>
<td style="text-align:right;">
6.5%
</td>
<td style="text-align:right;">
-2.5%
</td>
</tr>
</tbody>
</table>
<p><code>library(formattable)</code> comes with useful pre-defined formats for <code>percent()</code>, <code>comma()</code>, <code>currency()</code>, <code>accounting()</code>, and <code>scientific()</code>.</p>
<pre class="r"><code>library(tidyverse)
library(formattable)

formats &lt;- tibble(
  Percent = percent(c(.068, .05, .05, .04, .09), digits = 1),
    Comma = comma(c(1000, 10000, 100000, 1000000, 10000000), digits = 0),
    Currency = currency(c(1, 1, 1, 1, 1)),
    Accounting = accounting(c(1, 1, 1, 1, 1)),
    Scientific = scientific(c(0.0001, 100000, 100000000000, 1, 1))
)
    
formattable(formats)</code></pre>
<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
Percent
</th>
<th style="text-align:right;">
Comma
</th>
<th style="text-align:right;">
Currency
</th>
<th style="text-align:right;">
Accounting
</th>
<th style="text-align:right;">
Scientific
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
6.8%
</td>
<td style="text-align:right;">
1,000
</td>
<td style="text-align:right;">
$1.00
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.0000e-04
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0%
</td>
<td style="text-align:right;">
10,000
</td>
<td style="text-align:right;">
$1.00
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.0000e+05
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0%
</td>
<td style="text-align:right;">
100,000
</td>
<td style="text-align:right;">
$1.00
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.0000e+11
</td>
</tr>
<tr>
<td style="text-align:right;">
4.0%
</td>
<td style="text-align:right;">
1,000,000
</td>
<td style="text-align:right;">
$1.00
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.0000e+00
</td>
</tr>
<tr>
<td style="text-align:right;">
9.0%
</td>
<td style="text-align:right;">
10,000,000
</td>
<td style="text-align:right;">
$1.00
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.0000e+00
</td>
</tr>
</tbody>
</table>
<p><code>library(formattable)</code> can be combined with any of the tools outlined in this document. All of the format functions can be used on individual vectors and passed to other table functions.</p>
<p>In this example, <code>currency()</code> is used with <code>kable()</code> to add a dollar sign and two decimals to price.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)

diamonds %&gt;%
    mutate(price = currency(price)) %&gt;%
    head() %&gt;%
    kable(full_width = FALSE)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:right;">
carat
</th>
<th style="text-align:left;">
cut
</th>
<th style="text-align:left;">
color
</th>
<th style="text-align:left;">
clarity
</th>
<th style="text-align:right;">
depth
</th>
<th style="text-align:right;">
table
</th>
<th style="text-align:right;">
price
</th>
<th style="text-align:right;">
x
</th>
<th style="text-align:right;">
y
</th>
<th style="text-align:right;">
z
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:left;">
Ideal
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
SI2
</td>
<td style="text-align:right;">
61.5
</td>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
$326.00
</td>
<td style="text-align:right;">
3.95
</td>
<td style="text-align:right;">
3.98
</td>
<td style="text-align:right;">
2.43
</td>
</tr>
<tr>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:left;">
Premium
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
SI1
</td>
<td style="text-align:right;">
59.8
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
$326.00
</td>
<td style="text-align:right;">
3.89
</td>
<td style="text-align:right;">
3.84
</td>
<td style="text-align:right;">
2.31
</td>
</tr>
<tr>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:left;">
Good
</td>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
VS1
</td>
<td style="text-align:right;">
56.9
</td>
<td style="text-align:right;">
65
</td>
<td style="text-align:right;">
$327.00
</td>
<td style="text-align:right;">
4.05
</td>
<td style="text-align:right;">
4.07
</td>
<td style="text-align:right;">
2.31
</td>
</tr>
<tr>
<td style="text-align:right;">
0.29
</td>
<td style="text-align:left;">
Premium
</td>
<td style="text-align:left;">
I
</td>
<td style="text-align:left;">
VS2
</td>
<td style="text-align:right;">
62.4
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
$334.00
</td>
<td style="text-align:right;">
4.20
</td>
<td style="text-align:right;">
4.23
</td>
<td style="text-align:right;">
2.63
</td>
</tr>
<tr>
<td style="text-align:right;">
0.31
</td>
<td style="text-align:left;">
Good
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
SI2
</td>
<td style="text-align:right;">
63.3
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
$335.00
</td>
<td style="text-align:right;">
4.34
</td>
<td style="text-align:right;">
4.35
</td>
<td style="text-align:right;">
2.75
</td>
</tr>
<tr>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:left;">
Very Good
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
VVS2
</td>
<td style="text-align:right;">
62.8
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
$336.00
</td>
<td style="text-align:right;">
3.94
</td>
<td style="text-align:right;">
3.96
</td>
<td style="text-align:right;">
2.48
</td>
</tr>
</tbody>
</table>
</div>
<div id="formattable-tables" class="section level3">
<h3>formattable tables</h3>
<p><code>library(formattable)</code> can add formatting to tables that blurs the line between table and plot.</p>
<p><em>Note:</em> <code>library(formattable)</code> creates objects of class <code>formattable</code> so it isn’t necessary possible to combine all of the features of <code>library(formattable)</code> with the packages described elsewhere in this document.</p>
<pre class="r"><code>library(tidyverse)
library(formattable)

unemployment &lt;- tibble(
    State = c(&quot;Alabama&quot;, &quot;Alaska&quot;, &quot;Arizona&quot;, &quot;Arkansas&quot;, &quot;California&quot;),
  unemployment2000 = c(6.8, 5, 5, 4, 9),
  unemployment2013 = c(6.4, 6.2, 5, 6, 6.5),
  Change = c(-0.4, 1.2, 0, 2.0, -2.5)
    )

sign_formatter &lt;- formatter(&quot;span&quot;, 
  style = x ~ style(color = ifelse(x &gt; 0, &quot;green&quot;, 
    ifelse(x &lt; 0, &quot;red&quot;, &quot;black&quot;))))

formattable(unemployment, list(Change = sign_formatter))</code></pre>
<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
State
</th>
<th style="text-align:right;">
unemployment2000
</th>
<th style="text-align:right;">
unemployment2013
</th>
<th style="text-align:right;">
Change
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
Alabama
</td>
<td style="text-align:right;">
6.8
</td>
<td style="text-align:right;">
6.4
</td>
<td style="text-align:right;">
<span style="color: red">-0.4</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Alaska
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
6.2
</td>
<td style="text-align:right;">
<span style="color: green">1.2</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Arizona
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
<span style="color: black">0.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
Arkansas
</td>
<td style="text-align:right;">
4.0
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
<span style="color: green">2.0</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
California
</td>
<td style="text-align:right;">
9.0
</td>
<td style="text-align:right;">
6.5
</td>
<td style="text-align:right;">
<span style="color: red">-2.5</span>
</td>
</tr>
</tbody>
</table>
<p>The following example outlines advanced features:</p>
<ul>
<li><code>color_tile()</code> creates a colored tile under each observation of a variable</li>
<li><code>formatter()</code> establishes rules for a custom format</li>
<li><code>normalize_bar()</code> adds colored bars of varying size to each observation of a variable</li>
<li><code>icontext()</code> adds glyphs to each observation of variable</li>
</ul>
<pre class="r"><code>library(tidyverse)
library(formattable)

employees &lt;- tibble(Tenure = c(27, 8, 6, 5, 4),
                                        Performance = c(&quot;B&quot;, &quot;F&quot;, &quot;A&quot;, &quot;A&quot;, &quot;C&quot;),
                                        `IT Training` = c(TRUE, FALSE, TRUE, TRUE, TRUE),
                                        `Accrued PTO` = c(98, 2, 8, 38, 6))

formattable(employees, 
    list(Tenure = color_tile(&quot;white&quot;, &quot;#1696d2&quot;),
             Performance = formatter(&quot;span&quot;, 
                    style = x ~ ifelse(x == &quot;F&quot;, style(color = &quot;red&quot;, font.weight = &quot;bold&quot;), NA)),
             `IT Training` = formatter(&quot;span&quot;, style = x ~ style(color = ifelse(x, &quot;green&quot;, &quot;red&quot;)),
                x ~ icontext(ifelse(x, &quot;ok&quot;, &quot;remove&quot;), ifelse(x, &quot;Yes&quot;, &quot;No&quot;))),
             `Accrued PTO` = normalize_bar(&quot;#fdbf11&quot;, 0.2)
    ), caption = &quot;Employees&quot;
)</code></pre>
<table class="table table-condensed">
<caption>
Employees
</caption>
<thead>
<tr>
<th style="text-align:right;">
Tenure
</th>
<th style="text-align:right;">
Performance
</th>
<th style="text-align:right;">
IT Training
</th>
<th style="text-align:right;">
Accrued PTO
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #1696d2">27</span>
</td>
<td style="text-align:right;">
<span>B</span>
</td>
<td style="text-align:right;">
<span style="color: green"> <i class="glyphicon glyphicon-ok"></i> Yes </span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #fdbf11; width: 100.00%">98</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #d6ecf7">8</span>
</td>
<td style="text-align:right;">
<span style="color: red; font-weight: bold">F</span>
</td>
<td style="text-align:right;">
<span style="color: red"> <i class="glyphicon glyphicon-remove"></i> No </span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #fdbf11; width: 20.00%">2</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #eaf5fb">6</span>
</td>
<td style="text-align:right;">
<span>A</span>
</td>
<td style="text-align:right;">
<span style="color: green"> <i class="glyphicon glyphicon-ok"></i> Yes </span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #fdbf11; width: 25.00%">8</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #f4fafd">5</span>
</td>
<td style="text-align:right;">
<span>A</span>
</td>
<td style="text-align:right;">
<span style="color: green"> <i class="glyphicon glyphicon-ok"></i> Yes </span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #fdbf11; width: 50.00%">38</span>
</td>
</tr>
<tr>
<td style="text-align:right;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">4</span>
</td>
<td style="text-align:right;">
<span>C</span>
</td>
<td style="text-align:right;">
<span style="color: green"> <i class="glyphicon glyphicon-ok"></i> Yes </span>
</td>
<td style="text-align:right;">
<span style="display: inline-block; direction: rtl; unicode-bidi: plaintext; border-radius: 4px; padding-right: 2px; background-color: #fdbf11; width: 23.33%">6</span>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="librarystargazer" class="section level2">
<h2>library(stargazer)</h2>
<p><code>library(stargazer)</code> is the best package for exporting “untidy”, but well-formatted regression tables in .html, LaTeX, and ASCII. These tables can be included in R Markdown documents by adding the argument <code>results = "asis"</code> to the header of a “code chunk”.</p>
<p>They can also be exported as .html code, LaTeX code, and formatted ASCII.</p>
<p><code>library(stargazer)</code> has an abundance of formatting options. <a href="https://cran.r-project.org/web/packages/stargazer/vignettes/stargazer.pdf">This vignette</a> and <a href="https://www.jakeruss.com/cheatsheets/stargazer/">this cheatsheet</a> outline most of what can be done with the package. This example shows how a little code can go a long way. Simply build as many models as desired, adjust some of the labels, and add a title.</p>
<pre class="r"><code>library(tidyverse)
library(stargazer)

linear1 &lt;- lm(price ~ carat + x + y + z + depth, data = diamonds)
linear2 &lt;- lm(price ~ carat + x + y + z, data = diamonds)

diamonds_indicator &lt;- diamonds %&gt;%
  mutate(price_indicator = price &gt; 5324)

probit1 &lt;- glm(price_indicator ~ carat + x + y + z, data = diamonds_indicator, family = binomial(link = &quot;probit&quot;))

stargazer(linear1, linear2, probit1, 
          type = &quot;html&quot;,
          title = &quot;Regression Results&quot;,
          align = TRUE, 
          dep.var.labels = c(&quot;Overall Prices&quot;, &quot;High Prices&quot;),
          covariate.labels = c(&quot;Carats&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;, &quot;Cut&quot;),
          no.space = TRUE,
          digits = 2)</code></pre>
<table style="text-align:center">
<caption>
<strong>Regression Results</strong>
</caption>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="3">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
Overall Prices
</td>
<td>
High Prices
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
<em>OLS</em>
</td>
<td>
<em>probit</em>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
<td>
(3)
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Carats
</td>
<td>
10,615.50<sup>***</sup>
</td>
<td>
10,233.91<sup>***</sup>
</td>
<td>
-4.23<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(63.81)
</td>
<td>
(62.94)
</td>
<td>
(0.21)
</td>
</tr>
<tr>
<td style="text-align:left">
X
</td>
<td>
-1,369.67<sup>***</sup>
</td>
<td>
-884.21<sup>***</sup>
</td>
<td>
1.40<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(43.48)
</td>
<td>
(40.47)
</td>
<td>
(0.15)
</td>
</tr>
<tr>
<td style="text-align:left">
Y
</td>
<td>
97.60<sup>***</sup>
</td>
<td>
166.04<sup>***</sup>
</td>
<td>
1.45<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(25.76)
</td>
<td>
(25.86)
</td>
<td>
(0.15)
</td>
</tr>
<tr>
<td style="text-align:left">
Z
</td>
<td>
64.20
</td>
<td>
-576.20<sup>***</sup>
</td>
<td>
1.96<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(44.75)
</td>
<td>
(39.28)
</td>
<td>
(0.13)
</td>
</tr>
<tr>
<td style="text-align:left">
Cut
</td>
<td>
-156.62<sup>***</sup>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(5.38)
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
12,196.69<sup>***</sup>
</td>
<td>
1,921.17<sup>***</sup>
</td>
<td>
-22.21<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(367.64)
</td>
<td>
(104.37)
</td>
<td>
(0.57)
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
53,940
</td>
<td>
53,940
</td>
<td>
53,940
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.86
</td>
<td>
0.85
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.86
</td>
<td>
0.85
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Log Likelihood
</td>
<td>
</td>
<td>
</td>
<td>
-10,315.28
</td>
</tr>
<tr>
<td style="text-align:left">
Akaike Inf. Crit.
</td>
<td>
</td>
<td>
</td>
<td>
20,640.56
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
1,512.17 (df = 53934)
</td>
<td>
1,524.01 (df = 53935)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
64,298.14<sup>***</sup> (df = 5; 53934)
</td>
<td>
78,920.42<sup>***</sup> (df = 4; 53935)
</td>
<td>
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="3" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
<div id="be-sure-to-cite-librarystargazer" class="section level5">
<h5>Be sure to cite <code>library(stargazer)</code>:</h5>
<blockquote>
<p>Hlavac, Marek (2015). stargazer: Well-Formatted Regression and Summary Statistics Tables. R package version 5.2. <a href="http://CRAN.R-project.org/package=stargazer" class="uri">http://CRAN.R-project.org/package=stargazer</a></p>
</blockquote>
</div>
</div>
<div id="librarydt" class="section level2">
<h2>library(DT)</h2>
<p><code>library(DT)</code> is an R interface for the DataTables library in JavaScript. This <a href="https://rstudio.github.io/DT/">vignette</a> for the package outlines many ways output can be customized.</p>
<p>This example displays an augmented data frame used for a regression. That is, it displays the independent and dependent variables with fitted values, standard-errors of the fitted values, residuals, etc.</p>
<p>The example shows how columns can be renamed using <code>colnames = c("Price" = "price")</code>. It’s also possible to pass an entire vector of new columns like <code>colnames = c("Price", "Carat", ...)</code>.</p>
<pre class="r"><code>library(tidyverse)
library(DT)
library(broom)

model1 &lt;- lm(formula = mpg ~ wt, data = mtcars)

augment(model1) %&gt;%
  mutate_at(vars(mpg:.std.resid), round, 2) %&gt;%
  datatable(colnames = c(&quot;Miles Per Gallon&quot; = &quot;mpg&quot;, &quot;Weight&quot; = &quot;wt&quot;), options = list(pageLength = 5), style = &quot;bootstrap&quot;)</code></pre>
<div id="htmlwidget-81e2ecfd370e1acedc31" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-81e2ecfd370e1acedc31">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],[2.62,2.88,2.32,3.21,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.42,5.34,2.2,1.61,1.83,2.46,3.52,3.44,3.84,3.85,1.94,2.14,1.51,3.17,2.77,3.57,2.78],[23.28,21.92,24.89,20.1,18.9,18.79,18.21,20.24,20.45,18.9,18.9,15.53,17.35,17.08,9.23,8.3,8.72,25.53,28.65,27.48,24.11,18.47,18.93,16.76,16.74,26.94,25.85,29.2,20.34,22.48,18.21,22.43],[-2.28,-0.92,-2.09,1.3,-0.2,-0.69,-3.91,4.16,2.35,0.3,-1.1,0.87,-0.05,-1.88,1.17,2.1,5.98,6.87,1.75,6.42,-2.61,-2.97,-3.73,-3.46,2.46,0.36,0.15,1.2,-4.54,-2.78,-3.21,-1.03],[0.04,0.04,0.06,0.03,0.03,0.03,0.04,0.03,0.03,0.03,0.03,0.06,0.04,0.04,0.17,0.2,0.18,0.07,0.12,0.1,0.05,0.03,0.03,0.04,0.04,0.09,0.07,0.13,0.03,0.04,0.04,0.04],[3.07,3.09,3.07,3.09,3.1,3.1,3.01,3,3.07,3.1,3.09,3.09,3.1,3.08,3.09,3.07,2.84,2.8,3.08,2.83,3.06,3.05,3.02,3.03,3.06,3.1,3.1,3.09,2.98,3.05,3.04,3.09],[0.01,0,0.02,0,0,0,0.03,0.03,0.01,0,0,0,0,0.01,0.02,0.07,0.53,0.19,0.02,0.26,0.02,0.02,0.03,0.03,0.02,0,0,0.01,0.04,0.02,0.02,0],[-0.77,-0.31,-0.71,0.43,-0.07,-0.23,-1.31,1.39,0.78,0.1,-0.37,0.29,-0.02,-0.63,0.42,0.77,2.17,2.33,0.61,2.22,-0.88,-0.99,-1.24,-1.16,0.83,0.12,0.05,0.42,-1.52,-0.93,-1.07,-0.34]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.rownames<\/th>\n      <th>Miles Per Gallon<\/th>\n      <th>Weight<\/th>\n      <th>.fitted<\/th>\n      <th>.resid<\/th>\n      <th>.hat<\/th>\n      <th>.sigma<\/th>\n      <th>.cooksd<\/th>\n      <th>.std.resid<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="export-to-excel" class="section level2">
<h2>Export to Excel</h2>
<p>Exporting to Microsoft Excel abandons many of the advantages, like reproducibility, automation and interactivity, of the other tools outlined in this document, but Excel is often a part of Urban Institute researchers’ workflows.</p>
<div id="write_csv" class="section level3">
<h3>write_csv()</h3>
<p><img src="tables/images/csv.png" width="300px" /></p>
<p>The simplest option is to use <code>write_csv()</code> from <code>library(readr)</code> (loaded in <code>library(tidyverse)</code>) to create a .csv that can be opened in Microsoft Excel. Before writing to .csv, be sure to use <code>library(broom)</code> to put untidy information into data frames, <code>library(dplyr)</code> to select desired rows and columns, and <code>library(formattable)</code> to put individual columns into desired formats.</p>
<div id="example-code" class="section level4">
<h4>Example code</h4>
<pre class="r"><code>library(tidyverse)

diamonds %&gt;%
    # select and rename columns
    select(Carat = carat, Price = price) %&gt;%
    # filter to the first ten rows
    filter(row_number() &lt;= 10) %&gt;%
    # save as .csv
    write_csv(&quot;diamonds.csv&quot;)</code></pre>
<p><code>write_excel_csv()</code> is a close alternative to <code>write_csv()</code> that includes a UTF-8 Byte order mark that indicates to Excel the csv is UTF-8 encoded. All other syntax should be identical.</p>
</div>
</div>
<div id="librarywritexl" class="section level3">
<h3>library(writexl)</h3>
<p><img src="tables/images/excel.png" width="300px" /></p>
<p><code>library(writexl)</code> is a new package that mimics the light-weight design of <code>library(readxl)</code>. It doesn’t require JAVA or Microsoft Excel to create and write to a .xlsx document. The package is slim now but more development is expected in the near future.</p>
<div id="example-code-1" class="section level4">
<h4>Example code</h4>
<pre class="r"><code>library(tidyverse)
library(writexl)

diamonds %&gt;%
    # select and rename columns
    select(Carat = carat, Price = price) %&gt;%
    # filter to the first ten rows
    filter(row_number() &lt;= 10) %&gt;%
    # save as .csv
    write_xlsx(&quot;diamonds.xlsx&quot;)</code></pre>
</div>
</div>
<div id="libraryopenxlsx" class="section level3">
<h3>library(openxlsx)</h3>
<p><code>library(openxlsx)</code> (<a href="https://cran.r-project.org/web/packages/openxlsx/openxlsx.pdf">CRAN</a>, <a href="https://github.com/awalker89/openxlsx">GitHub</a>) allows for the creation, writing, and styling of Microsoft Excel documents. It doesn’t require JAVA, which is a huge improvement over its predecessors <code>library(xlsx)</code> and <code>library(XLConnect)</code>.</p>
<p>For Windows computers, <code>library(openxlsx)</code> will require a little extra setup which is outlined in this <a href="https://github.com/awalker89/openxlsx">GitHub README</a>). Linux and Mac computers don’t require any additional setup.</p>
<p>Submit <code>vignette("Introduction", package = "openxlsx")</code> in R for a complete introduction to <code>library(openxlsx)</code>.</p>
<div id="example-code-2" class="section level4">
<h4>Example code</h4>
<p>The biggest advantage of <code>library(openxlsx)</code> is the ability to specify workbook, sheet number of name, starting row, and starting column.</p>
<pre class="r"><code>library(tidyverse)
library(openxlsx)

writeData(wb, 1, df, startRow = 2, startCol = 2)

diamonds_subset &lt;- diamonds %&gt;%
    # select and rename columns
    select(Carat = carat, Price = price) %&gt;%
    # filter to the first ten rows
    filter(row_number() &lt;= 10) %&gt;%
    # save as .csv
    write_xlsx(&quot;diamonds.xlsx&quot;)

writeData(wb = &quot;diamonds.xlsx&quot;, 
                    sheet = &quot;price&quot;, 
                    x = diamonds_subset, 
                    startRow = 2, 
                    startCol = 2)</code></pre>
<p><code>library(openxlsx)</code> also contains scores of options for controlling the destination format. <code>?writeData()</code> is good place to get started with formatting.</p>
</div>
</div>
</div>
<div id="tidy-data" class="section level2">
<h2>Tidy Data</h2>
<p>Most tools for building tables in R require tidy data frames or tibbles. <a href="https://www.jstatsoft.org/article/view/v059i10">Tidy data</a> has three principles:</p>
<ol style="list-style-type: decimal">
<li>Each variable forms a column</li>
<li>Each observation forms a row</li>
<li>Each type of observational unit forms a table</li>
</ol>
<p>Not all R output is tidy. For example, regression output isn’t tidy by default:</p>
<pre class="r"><code>library(tidyverse)

model1 &lt;- lm(dist ~ speed, data = cars)

summary(model1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -29.069  -9.525  -2.272   9.215  43.201 
## 
## Coefficients:
##             Estimate Std. Error t value         Pr(&gt;|t|)    
## (Intercept) -17.5791     6.7584  -2.601           0.0123 *  
## speed         3.9324     0.4155   9.464 0.00000000000149 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 15.38 on 48 degrees of freedom
## Multiple R-squared:  0.6511, Adjusted R-squared:  0.6438 
## F-statistic: 89.57 on 1 and 48 DF,  p-value: 0.00000000000149</code></pre>
<p>It’s easy to print the above output, as-is, to an R Markdown document or send it to a Microsoft Word file. But the above information isn’t attractive and it can’t be formatted. It also isn’t machine readable!</p>
<p>Fortunately, R has a suite of packages that make easy tidying data.</p>
<pre class="r"><code>library(tidyverse)
library(broom)
tidy(model1)</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)   -17.6      6.76      -2.60 1.23e- 2
## 2 speed           3.93     0.416      9.46 1.49e-12</code></pre>
<p>Now the regression is in a tidy format with each variable as a column, each observation as a row, and the observational unit is coefficients. It is easy to put data into tables once data are “tidy”.</p>
<div id="librarybroom" class="section level3">
<h3>library(broom)</h3>
<p><code>library(broom)</code> is useful for converting statistical analysis objects from R into data frames.</p>
<p>Regressions in R are stored in clunky hierarchical data structures.</p>
<pre class="r"><code>library(tidyverse)

model1 &lt;- lm(dist~speed, data = cars)
summary(model1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -29.069  -9.525  -2.272   9.215  43.201 
## 
## Coefficients:
##             Estimate Std. Error t value         Pr(&gt;|t|)    
## (Intercept) -17.5791     6.7584  -2.601           0.0123 *  
## speed         3.9324     0.4155   9.464 0.00000000000149 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 15.38 on 48 degrees of freedom
## Multiple R-squared:  0.6511, Adjusted R-squared:  0.6438 
## F-statistic: 89.57 on 1 and 48 DF,  p-value: 0.00000000000149</code></pre>
<div id="glance" class="section level4">
<h4>glance()</h4>
<p><code>glance()</code> returns a tidy data frame with one observation for each model. Each column gives a model summary: either a measure of model quality or complexity, or a combination of the two.</p>
<pre class="r"><code>library(broom)

glance(model1)</code></pre>
<pre><code>## # A tibble: 1 × 12
##   r.squared adj.r.squared sigma statistic  p.value    df logLik   AIC   BIC
##       &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0.651         0.644  15.4      89.6 1.49e-12     1  -207.  419.  425.
## # … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
<div id="tidy" class="section level4">
<h4>tidy()</h4>
<p><code>tidy()</code> returns a tidy data frame with one observation for each coefficient in a model. Each column gives information about the estimate or its variability.</p>
<pre class="r"><code>library(broom)

tidy(model1)</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)   -17.6      6.76      -2.60 1.23e- 2
## 2 speed           3.93     0.416      9.46 1.49e-12</code></pre>
</div>
<div id="augment" class="section level4">
<h4>augment()</h4>
<p><code>augment()</code> returns a tidy data frame with one observation for each observation in the input data set.</p>
<pre class="r"><code>library(broom)

augment(model1) %&gt;%
    top_n(5)</code></pre>
<pre><code>## # A tibble: 5 × 8
##    dist speed .fitted .resid   .hat .sigma .cooksd .std.resid
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1    60    14    37.5   22.5 0.0214   15.2  0.0240       1.48
## 2    80    14    37.5   42.5 0.0214   14.2  0.0856       2.80
## 3    76    18    53.2   22.8 0.0249   15.2  0.0288       1.50
## 4    84    18    53.2   30.8 0.0249   14.9  0.0526       2.03
## 5   120    24    76.8   43.2 0.0740   14.1  0.340        2.92</code></pre>
</div>
</div>
<div id="librarydplyr" class="section level3">
<h3>library(dplyr)</h3>
<p><code>library(dplyr)</code> is a powerful tool for data manipulation. The following “verbs” control the most common data manipulations:</p>
<ol style="list-style-type: decimal">
<li><code>select()</code>: select columns from a data frame</li>
<li><code>filter()</code>: filter rows in a data frame based on a condition or conditions</li>
<li><code>arrange()</code>: change the order of observations in a data frame</li>
<li><code>mutate()</code>: create or alter variables in a data frame</li>
<li><code>rename()</code>: change the name of a variable in a data frame</li>
<li><code>summarize()</code>: summarize values in a data frame into one row or multiple rows for grouped observations</li>
<li><code>group_by()</code>: group observations based on the levels of a variable or levels of variables</li>
</ol>
<p>These verbs are useful for changing data frames before converting them into publishable tables.</p>
</div>
</div>
<div id="putting-it-all-together" class="section level2">
<h2>Putting it all together</h2>
<p>The code examples above highlight the marginal changes of different functions or arguments. The examples do not put all of the tools together into publication-ready tables. This section will be a repository for tables made for Urban Institute publications in R.</p>
</div>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.0.5 (2021-03-31)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Big Sur 10.16
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] broom_0.7.9           DT_0.20               stargazer_5.2.2      
##  [4] formattable_0.2.1     furrr_0.2.3           future.apply_1.8.1   
##  [7] future_1.22.1         microbenchmark_1.4.9  profvis_0.3.7        
## [10] mapview_2.10.2        geofacet_0.2.0        urbnmapr_0.0.0.9002  
## [13] sf_0.9-8              here_1.0.1            kableExtra_1.3.4     
## [16] RXKCD_1.9.2           wooldridge_1.4-2      AmesHousing_0.0.4    
## [19] gghighlight_0.3.2     fivethirtyeight_0.6.2 ggridges_0.5.3       
## [22] ggrepel_0.9.1         gapminder_0.3.0       urbnthemes_0.0.2     
## [25] knitr_1.31            censusapi_0.7.1       tidycensus_0.11.4    
## [28] forcats_0.5.1         stringr_1.4.0         dplyr_1.0.7          
## [31] purrr_0.3.4           readr_2.1.1           tidyr_1.1.4          
## [34] tibble_3.1.6          ggplot2_3.3.5         tidyverse_1.3.1      
## 
## loaded via a namespace (and not attached):
##   [1] readxl_1.3.1            uuid_0.1-4              backports_1.2.1        
##   [4] systemfonts_1.0.3       plyr_1.8.6              sp_1.4-5               
##   [7] splines_4.0.5           listenv_0.8.0           crosstalk_1.2.0        
##  [10] leaflet_2.0.4.1         pryr_0.1.5              leafpop_0.0.6          
##  [13] digest_0.6.29           htmltools_0.5.2         leaflet.providers_1.9.0
##  [16] fansi_0.5.0             magrittr_2.0.1          tzdb_0.2.0             
##  [19] globals_0.14.0          modelr_0.1.8            extrafont_0.17         
##  [22] vroom_1.5.7             extrafontdb_1.0         svglite_2.0.0          
##  [25] jpeg_0.1-9              colorspace_2.0-2        rvest_1.0.0            
##  [28] rappdirs_0.3.3          lobstr_1.1.1            tidylog_1.0.2          
##  [31] haven_2.3.1             xfun_0.22               rgdal_1.5-23           
##  [34] leafem_0.1.3            crayon_1.4.2            jsonlite_1.7.2         
##  [37] brew_1.0-6              tigris_1.4.1            glue_1.5.1             
##  [40] gtable_0.3.0            webshot_0.5.2           Rttf2pt1_1.3.9         
##  [43] imguR_1.0.3             scales_1.1.1            DBI_1.1.1              
##  [46] Rcpp_1.0.7              viridisLite_0.4.0       units_0.7-1            
##  [49] foreign_0.8-81          bit_4.0.4               proxy_0.4-25           
##  [52] clisymbols_1.2.0        stats4_4.0.5            htmlwidgets_1.5.4      
##  [55] geogrid_0.1.1           httr_1.4.2              RColorBrewer_1.1-2     
##  [58] ellipsis_0.3.2          pkgconfig_2.0.3         farver_2.1.0           
##  [61] sass_0.4.0              dbplyr_2.1.1            utf8_1.2.2             
##  [64] janitor_2.1.0           RJSONIO_1.3-1.6         tidyselect_1.1.1       
##  [67] labeling_0.4.2          rlang_0.4.12            leaflet.extras2_1.1.0  
##  [70] munsell_0.5.0           cellranger_1.1.0        tools_4.0.5            
##  [73] cli_3.1.0               generics_0.1.1          evaluate_0.14          
##  [76] fastmap_1.1.0           yaml_2.2.1              bit64_4.0.5            
##  [79] fs_1.5.2                satellite_1.0.2         nlme_3.1-152           
##  [82] xml2_1.3.2              compiler_4.0.5          rstudioapi_0.13        
##  [85] curl_4.3.2              png_0.1-7               e1071_1.7-6            
##  [88] reprex_2.0.0            bslib_0.3.1             stringi_1.7.6          
##  [91] highr_0.8               rgeos_0.5-5             lattice_0.20-41        
##  [94] Matrix_1.3-2            classInt_0.4-3          vctrs_0.3.8            
##  [97] pillar_1.6.4            lifecycle_1.0.1         jquerylib_0.1.4        
## [100] maptools_1.1-1          raster_3.4-5            R6_2.5.1               
## [103] KernSmooth_2.23-18      gridExtra_2.3           parallelly_1.28.1      
## [106] codetools_0.2-18        assertthat_0.2.1        rprojroot_2.0.2        
## [109] withr_2.4.3             rnaturalearth_0.1.0     mgcv_1.8-34            
## [112] parallel_4.0.5          hms_1.1.1               grid_4.0.5             
## [115] class_7.3-18            rmarkdown_2.7           snakecase_0.11.0       
## [118] lubridate_1.7.10        base64enc_0.1-3</code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
